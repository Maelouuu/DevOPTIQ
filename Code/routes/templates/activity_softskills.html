<!-- Code/routes/templates/activity_softskills.html -->

<div class="softskills-section" data-activity-id="{{ item.activity.id }}">

    <!-- Boutons proposer en premier -->
    <div class="section-actions-top hsc-actions-row">
        <button class="btn-modal-primary-propose" onclick="fetchActivityDetailsForPropose('{{ item.activity.id }}')">
            <i class="fa-solid fa-sparkles"></i> Proposer HSC
        </button>
        <button class="btn-modal-primary-propose" onclick="openTranslateSoftskillsModal('{{ item.activity.id }}')">
            <i class="fa-solid fa-language"></i> Traduire Softskills
        </button>
    </div>

    <!-- Conteneur du partial -->
    <div id="softskills-list-{{ item.activity.id }}">
        {% set activity = item.activity %}
        {% include "softskills_partial.html" %}
    </div>

    <!-- Section ajouter HSC -->
    <div class="add-item-section">
        <button class="btn-modal-primary-propose" onclick="showAddSoftskillForm('{{ item.activity.id }}')">
            <i class="fa-solid fa-plus"></i> Ajouter une HSC
        </button>

        <!-- Formulaire d'ajout manuel (caché par défaut) -->
        <div id="add-softskill-form-{{ item.activity.id }}" class="hsc-add-form" style="display:none;">
            <div class="form-row">
                <label for="new-softskill-name-{{ item.activity.id }}">Habileté :</label>
                <input type="text" class="task-input" id="new-softskill-name-{{ item.activity.id }}" placeholder="Ex: Analyse critique" />
            </div>
            <div class="form-row">
                <label for="new-softskill-level-{{ item.activity.id }}">Niveau :</label>
                <select id="new-softskill-level-{{ item.activity.id }}" class="task-select-single">
                    <option value="1 (Aptitude)">1 (Aptitude)</option>
                    <option value="2 (Acquisition)" selected>2 (Acquisition)</option>
                    <option value="3 (Maîtrise)">3 (Maîtrise)</option>
                    <option value="4 (Excellence)">4 (Excellence)</option>
                </select>
            </div>
            <div class="form-row">
                <label for="new-softskill-justif-{{ item.activity.id }}">Justification (optionnel) :</label>
                <textarea id="new-softskill-justif-{{ item.activity.id }}" class="task-input hsc-textarea" rows="2" placeholder="Pourquoi cette habileté est requise..."></textarea>
            </div>
            <div class="task-form-actions">
                <button class="btn-action-primary btn-sm" onclick="submitAddSoftskill('{{ item.activity.id }}')">
                    <i class="fa-solid fa-check"></i> Enregistrer
                </button>
                <button class="btn-action-secondary btn-sm" onclick="hideAddSoftskillForm('{{ item.activity.id }}')">
                    <i class="fa-solid fa-xmark"></i> Annuler
                </button>
            </div>
        </div>
    </div>

</div>
