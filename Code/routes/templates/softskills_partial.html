{% if activity.softskills and activity.softskills|length > 0 %}
  <ul class="items-list">
    {% for ss in activity.softskills %}
      <li id="softskill-{{ ss.id }}" class="sf-item hsc-item">

          <!-- Mode affichage -->
          <div id="softskill-display-{{ ss.id }}" class="sf-display">
              <span class="sf-text" id="softskill-desc-{{ ss.id }}">
                  <strong>{{ ss.habilete }}</strong>
                  <span class="hsc-level-badge">{{ ss.niveau }}</span>
              </span>

              {% if ss.justification %}
                  <button class="icon-btn" onclick="toggleSoftskillJustification('{{ ss.id }}')" title="Voir justification">
                      <i class="fa-solid fa-comment"></i>
                  </button>
              {% endif %}

              <button class="icon-btn" onclick="openEditSoftskill('{{ activity.id }}', '{{ ss.id }}')" title="Modifier">
                  <i class="fa-solid fa-pencil"></i>
              </button>

              <button class="icon-btn icon-btn-danger" onclick="deleteSoftskill('{{ activity.id }}', '{{ ss.id }}')" title="Supprimer">
                  <i class="fa-solid fa-trash"></i>
              </button>
          </div>

          {% if ss.justification %}
              <div id="softskill-justif-{{ ss.id }}" class="hsc-justification" style="display:none;">
                  <i class="fa-solid fa-quote-left"></i> {{ ss.justification }}
              </div>
          {% endif %}

          <!-- Mode édition -->
          <div id="softskill-edit-{{ ss.id }}" class="hsc-edit-form" style="display:none;">
              <div class="form-row">
                  <label>Habileté :</label>
                  <input type="text" id="softskill-edit-input-{{ ss.id }}" class="task-input" value="{{ ss.habilete }}" />
              </div>
              <div class="form-row">
                  <label>Niveau :</label>
                  <select id="softskill-edit-level-{{ ss.id }}" class="task-select-single">
                      <option value="1 (Aptitude)" {% if ss.niveau == "1 (Aptitude)" %}selected{% endif %}>1 (Aptitude)</option>
                      <option value="2 (Acquisition)" {% if ss.niveau == "2 (Acquisition)" %}selected{% endif %}>2 (Acquisition)</option>
                      <option value="3 (Maîtrise)" {% if ss.niveau == "3 (Maîtrise)" %}selected{% endif %}>3 (Maîtrise)</option>
                      <option value="4 (Excellence)" {% if ss.niveau == "4 (Excellence)" %}selected{% endif %}>4 (Excellence)</option>
                  </select>
              </div>
              <div class="form-row">
                  <label>Justification :</label>
                  <textarea id="softskill-edit-justif-{{ ss.id }}" class="task-input hsc-textarea" rows="2">{{ ss.justification }}</textarea>
              </div>
              <div class="task-form-actions">
                  <button class="btn-action-primary btn-sm" onclick="submitEditSoftskill('{{ activity.id }}','{{ ss.id }}')">
                      <i class="fa-solid fa-check"></i> Enregistrer
                  </button>
                  <button class="btn-action-secondary btn-sm" onclick="cancelEditSoftskill('{{ ss.id }}')">
                      <i class="fa-solid fa-xmark"></i> Annuler
                  </button>
              </div>
          </div>

      </li>
    {% endfor %}
  </ul>
{% else %}
  <p class="empty-text">Aucune habileté socio-cognitive enregistrée.</p>
{% endif %}
